<!DOCTYPE html>
<html>
<head>
  <title>Hello World - Cloudflare Pages Example</title>
</head>
<body>
  <h1 id="title"></h1> <!-- This will be populated with title from JSON -->
  <p id="description"></p> <!-- This will be populated with description from JSON -->
  <img id="image-url"> <!-- This will be populated with image URL from JSON -->
  <img id="myImage" src="" alt="Image from JSON" />

  <script>

    // myKey is hardcoded in this file. Managed in the corresponding git branch. See Readme)
    const WORKER_URL = "https://kv-value-retriever.porobov-p3798.workers.dev"
    const MY_KEY = "goerli-preview" 
    const fetchURL = WORKER_URL + "?myKey=" + MY_KEY

    fetch(fetchURL)
      .then(response => response.json())
      .then(data => {
        console.log(data.adsSnapshot.bigPicBinary)
        const base64Image = data.adsSnapshot.bigPicBinary.toString('base64')
        const title = document.getElementById("title");
        const imgElement = document.getElementById('myImage');
        imgElement.src = `data:image/jpeg;base64,${base64Image}`
      })
      .catch(error => {
        console.error("Failed to fetch JSON data", error);
      });
  </script>
</body>
</html>
